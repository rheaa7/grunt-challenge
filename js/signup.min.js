/*! grunt-challenge 12-12-2014 */
"use strict";function onReady(){for(var a=document.getElementsByName("state"),b=0;b<usStates.length;b++){var c=usStates[b].code,d=usStates[b].name,e=document.createElement("OPTION");e.value=c,e.textContent=d,a[0].appendChild(e)}var f=document.getElementById("occupation");f.addEventListener("change",otherOccupation);var g=document.getElementById("cancelButton");g.addEventListener("click",cancelPage);var h=document.getElementById("signup");h.addEventListener("submit",onSubmit)}function onSubmit(a){var b=!0;try{b=validateForm(this)}catch(c){console.log(c),b=!1}return!b&&a.preventDefault&&a.preventDefault(),a.returnValue=b,b}function cancelPage(){window.confirm("Are you sure you want to exit this page?")&&(window.location="https://www.google.com")}function otherOccupation(){var a=document.getElementsByName("occupationOther");a[0].style.display="other"===document.getElementById("occupation").value?"block":"none"}function validateForm(a){var b=["firstName","lastName","address1","city","state"];"other"===document.getElementById("occupation").value&&b.push("occupationOther");var c,d=!0;for(c=0;c<b.length;c++)d&=validateRequiredField(a.elements[b[c]]);d&=validateZip(a.elements.zip),d&=validateBirthday(a.elements.birthdate)}function validateRequiredField(a){var b=a.value.trim(),c=b.length>0;return a.className=c?"form-control":"form-control invalid-field",c}function validateZip(a){var b=new RegExp("^\\d{5}$"),c=b.test(a.value);return a.className=c?"form-control":"form-control invalid-field",c}function validateBirthday(a){var b=new Date,c=new Date(a.value),d=b.getFullYear()-c.getUTCFullYear(),e=b.getMonth()-c.getUTCMonth(),f=b.getDate()-c.getUTCDate();(0>e||0===e&&0>f)&&d--;var g=d>=13;return g?a.className="form-control":(a.className="form-control invalid-field",document.getElementById("birthdateMessage").innerHTML="You must be 13 years and over."),g}document.addEventListener("DOMContentLoaded",onReady());